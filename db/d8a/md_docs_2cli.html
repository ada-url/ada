<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ada: Command line interface (CLI)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
  DoxygenAwesomeFragmentCopyButton.init()
  DoxygenAwesomeParagraphLink.init()
  DoxygenAwesomeInteractiveToc.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ada<span id="projectnumber">&#160;3.1.0</span>
   </div>
   <div id="projectbrief">Fast spec-compliant URL parser</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('db/d8a/md_docs_2cli.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Command line interface (CLI)</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<p>The adaparse command tool takes URL strings (ASCII/UTF-8) and it validates, normalizes and queries them efficiently.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Command line options</h2>
<ul>
<li>Options:<ul>
<li><code>-d</code>, <code>--diagram</code>: Print a diagram of the result</li>
<li><code>-u</code>, <code>--url</code>: URL Parameter (required)</li>
<li><code>-h</code>, <code>--help</code>: Print usage</li>
<li><code>-g</code>, <code>--get</code>: Get a specific part of the URL (e.g., 'origin', 'host', etc. as mentioned in the examples above)</li>
<li><code>-b</code>, <code>--benchmark</code>: Run benchmark for piped file functions</li>
<li><code>-p</code>, <code>--path</code>: Process all the URLs in a given file</li>
<li><code>-o</code>, <code>--output</code>: Output the results of the parsing to a file</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Performance</h2>
<p>Our <code>adaparse</code> tool may outperform other popular alternatives. We offer a <a href="https://github.com/ada-url/url-various-datasets">collection of sets of URLs</a> for benchmarking purposes. The following results are on a MacBook Air 2022 (M2 processor) using LLVM 14. We compare against <a href="https://github.com/curl/trurl">trurl</a> version 0.6 (libcurl/7.87.0).</p>
<details >
<summary >
With the wikipedia_100k dataset, we get that adaparse can generate normalized URLs about <b>three times faster than trurl</b>.</summary>
<div class="fragment"><div class="line">time cat url-various-datasets/wikipedia/wikipedia_100k.txt| trurl --url-file - &amp;&gt; /dev/null   1</div>
<div class="line">cat url-various-datasets/wikipedia/wikipedia_100k.txt  0,00s user 0,01s system 3% cpu 0,179 total</div>
<div class="line">trurl --url-file - &amp;&gt; /dev/null  0,14s user 0,03s system 98% cpu 0,180 total</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">time cat url-various-datasets/wikipedia/wikipedia_100k.txt| ./build/tools/cli/adaparse -g href &amp;&gt; /dev/null</div>
<div class="line">cat url-various-datasets/wikipedia/wikipedia_100k.txt  0,00s user 0,00s system 10% cpu 0,056 total</div>
<div class="line">./build/tools/cli/adaparse -g href &amp;&gt; /dev/null  0,05s user 0,00s system 93% cpu 0,055 total</div>
</div><!-- fragment --> </details>
<details >
<summary >
With the top100 dataset, the adaparse tool is <b>twice as fast as the trurl</b>.</summary>
<div class="fragment"><div class="line">time cat url-various-datasets/top100/top100.txt| trurl --url-file - &amp;&gt; /dev/null              1</div>
<div class="line">cat url-various-datasets/top100/top100.txt  0,00s user 0,00s system 4% cpu 0,115 total</div>
<div class="line">trurl --url-file - &amp;&gt; /dev/null  0,09s user 0,02s system 97% cpu 0,113 total</div>
<div class="line"> </div>
<div class="line">time cat url-various-datasets/top100/top100.txt| ./build/tools/cli/adaparse -g href &amp;&gt; /dev/null</div>
<div class="line">cat url-various-datasets/top100/top100.txt  0,00s user 0,01s system 11% cpu 0,062 total</div>
<div class="line">./build/tools/cli/adaparse -g href &amp;&gt; /dev/null  0,05s user 0,00s system 94% cpu 0,061 total</div>
</div><!-- fragment --> </details>
<h3><a class="anchor" id="autotoc_md3"></a>
Comparison</h3>
<div class="fragment"><div class="line">wikipedia 100k</div>
<div class="line">ada ▏   55 ms ███████▋</div>
<div class="line">trurl ▏  180 ms █████████████████████████</div>
<div class="line"> </div>
<div class="line">top100</div>
<div class="line">ada ▏   61 ms █████████████▍</div>
<div class="line">trurl ▏  113 ms █████████████████████████</div>
</div><!-- fragment --><p>The results will vary depending on your system. We invite you to run your own benchmarks.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Usage/Examples</h2>
<h3><a class="anchor" id="autotoc_md5"></a>
Well-formatted URL</h3>
<div class="fragment"><div class="line">adaparse &quot;http://www.google.com&quot;</div>
</div><!-- fragment --><p> Output:</p>
<div class="fragment"><div class="line">http://www.google.com</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
Diagram</h3>
<div class="fragment"><div class="line">adaparse -d http://www.google.com/bal\?a\=\=11\#fddfds</div>
</div><!-- fragment --><p>Output:</p>
<div class="fragment"><div class="line">http://www.google.com/bal?a==11#fddfds [38 bytes]</div>
<div class="line">     | |             |   |     |</div>
<div class="line">     | |             |   |     `------ hash_start</div>
<div class="line">     | |             |   `------------ search_start 25</div>
<div class="line">     | |             `---------------- pathname_start 21</div>
<div class="line">     | |             `---------------- host_end 21</div>
<div class="line">     | `------------------------------ host_start 7</div>
<div class="line">     | `------------------------------ username_end 7</div>
<div class="line">     `-------------------------------- protocol_end 5</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
Pipe Operator</h3>
<p>Ada can process URLs from piped input, making it easy to integrate with other command-line tools that produce ASCII or UTF-8 outputs. Here's an example of how to pipe the output of another command into Ada. Given a list of URLs, one by line, we may query the normalized URL string (<code>href</code>) and detect any malformed URL:</p>
<div class="fragment"><div class="line">cat dragonball_url.txt | adaparse --get href</div>
</div><!-- fragment --><p>Output: </p><div class="fragment"><div class="line">http://www.goku.com</div>
<div class="line">http://www.vegeta.com</div>
<div class="line">http://www.gohan.com</div>
</div><!-- fragment --><p>Our tool supports the passing of arguments to each URL in said file so that you can query for the hash, the host, the protocol, the port, the origin, the search, the password, the username, the pathname or the hostname:</p>
<div class="fragment"><div class="line">cat dragonball_url.txt  | adaparse -g host</div>
</div><!-- fragment --><p>Output: </p><div class="fragment"><div class="line">www.goku.com</div>
<div class="line">www.vegeta.com</div>
<div class="line">www.gohan.com</div>
</div><!-- fragment --><p>If you omit <code>-g</code>, it will only provide a list of invalid URLs. This might be useful if you want to valid quickly a list of URLs.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Benchmark Runner</h2>
<p>The benchmark flag can be used to output the time it takes to process piped input:</p>
<div class="fragment"><div class="line">cat wikipedia_100k.txt | adaparse -b</div>
</div><!-- fragment --><p>Output: </p><div class="fragment"><div class="line">Invalid URL: 1968:_Die_Kinder_der_Diktatur</div>
<div class="line">Invalid URL: 58957:_The_Bluegrass_Guitar_Collection</div>
<div class="line">Invalid URL: 650luc:_Gangsta_Grillz</div>
<div class="line">Invalid URL: Q4%3A57</div>
<div class="line">Invalid URL: Q10%3A47</div>
<div class="line">Invalid URL: Q5%3A45</div>
<div class="line">Invalid URL: Q40%3A28</div>
<div class="line">Invalid URL: 1:1_scale</div>
<div class="line">Invalid URL: 1893:_A_World&#39;s_Fair_Mystery</div>
<div class="line">Invalid URL: 12:51_(Krissy_%26_Ericka_song)</div>
<div class="line">Invalid URL: 111:_A_Nelson_Number</div>
<div class="line">Invalid URL: 7:00AM-8%3A00AM_(24_season_5)</div>
<div class="line">Invalid URL: Q53%3A31</div>
<div class="line">read 5209265 bytes in 32819917 ns using 100000 lines, used 160 loads</div>
<div class="line">0.1587226744053009 GB/s</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Saving result to file system</h3>
<p>There is an option to output to a file on disk:</p>
<div class="fragment"><div class="line">cat wikipedia_100k.txt | adaparse -o wiki_output.txt</div>
</div><!-- fragment --><p>As well as read in from a file on disk without going through cat:</p>
<div class="fragment"><div class="line">adaparse -p wikipedia_top_100_txt</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md10"></a>
Advanced Usage</h3>
<p>You may also combine different flags together. E.g. Say one wishes to extract only the host from URLs stored in wikipedia.txt and output it to the test_write.txt file:</p>
<div class="fragment"><div class="line">adaparse&quot; -p wikipedia_top100.txt -o test_write.txt -g host -b</div>
</div><!-- fragment --><p>Output: </p><div class="fragment"><div class="line">read 5209265 bytes in 26737131 ns using 100000 lines, total_bytes is 5209265 used 160 loads</div>
<div class="line">0.19483260937757307 GB/s(base)</div>
</div><!-- fragment --><p>Content of test_write.txt: </p><div class="fragment"><div class="line">(---snip---)</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">en.wikipedia.org</div>
<div class="line">(---snip---)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path"><!-- id is needed for treeview function! --></div>
</body>
</html>
