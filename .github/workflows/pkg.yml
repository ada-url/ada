name: Debian pkg-config

on: [push, pull_request]

defaults:
  run:
    shell: sh

permissions:
  contents: read

jobs:
  pkg-config:
    runs-on: ubuntu-latest
    container:
      image: debian:11

    steps:
    - uses: actions/checkout@v3

    - name: Install dependencies
      run: |
        apt -y update
        apt -y --no-install-recommends install g++ cmake make pkg-config

    - name: Build and install
      run: |
        cmake -B build -G Ninja
        cmake --build build
        cmake --install build

    - name: Test pkg-config
      run: pkg-config --cflags --libs ada-url